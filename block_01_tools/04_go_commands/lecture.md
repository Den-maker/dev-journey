# Go Commands — Основные команды

## Структура Go программы

Прежде чем разбирать команды, посмотрим на минимальную программу на Go:
```go
package main

import "fmt"

func main() {
	fmt.Println("Hello, World!")
}
```

Разберём построчно:

**`package main`** — каждый `.go` файл должен объявить к какому пакету он принадлежит. `main` — это специальный пакет для исполняемых программ (не библиотек).

**`import "fmt"`** — подключаем пакет `fmt` (format) из стандартной библиотеки. Он содержит функции для форматированного ввода-вывода, включая `Println`.

**`func main() { ... }`** — функция `main` это **точка входа** в программу. Когда ты запускаешь программу, Go ищет функцию `main` в пакете `main` и выполняет её.

**`fmt.Println("Hello, World!")`** — вызов функции `Println` из пакета `fmt`. Она выводит текст в консоль и добавляет перенос строки.

## Основные команды Go

### `go run` — Компиляция и запуск

Самая частая команда при разработке. Она **компилирует программу во временный файл и сразу запускает его**.
```bash
go run main.go
go run block_01_tools/04_go_commands/hello/main.go  # можно указать полный путь
```

**Когда использовать:** Во время разработки для быстрого тестирования кода.

**Что происходит под капотом:**
1. Go компилирует `main.go` в исполняемый файл
2. Сохраняет его во временной папке
3. Запускает
4. После выполнения удаляет временный файл

### `go build` — Компиляция без запуска

Компилирует программу в **исполняемый файл** но не запускает его.
```bash
go build main.go
# Создаст файл main.exe (на Windows) или main (на Linux/Mac)
```

**Указать имя выходного файла:**
```bash
go build -o myapp.exe main.go
# Создаст файл myapp.exe
```

**Когда использовать:** Когда нужен готовый файл для распространения или деплоя.

**Плюсы `go build`:**
- Получаешь один исполняемый файл без зависимостей
- Можешь скопировать его на другой компьютер и просто запустить
- Нет нужды устанавливать Go на машине где будет запускаться программа

### `go install` — Компиляция и установка в систему

Компилирует программу и помещает исполняемый файл в `$GOPATH/bin` (обычно `~/go/bin` или `C:\Users\YourName\go\bin`).
```bash
go install main.go
```

**Когда использовать:** Когда создаёшь утилиту которую хочешь использовать из любой папки в терминале.

После `go install` можешь запускать программу просто по имени из любого места (если `$GOPATH/bin` добавлен в PATH).

### `go fmt` — Автоматическое форматирование кода

Go имеет **один официальный стиль форматирования**. Команда `go fmt` приводит код к этому стилю.
```bash
go fmt main.go
go fmt ./...          # отформатировать все .go файлы в проекте
```

**Что делает:**
- Выравнивает отступы (всегда табы, не пробелы)
- Удаляет лишние пробелы
- Правильно расставляет переносы строк

**Когда использовать:** Перед каждым коммитом в Git. Или настрой VS Code делать это автоматически при сохранении.

VS Code с расширением Go уже форматирует код при сохранении (`Ctrl+S`), так что эту команду вручную используешь редко.

### `go test` — Запуск тестов

Запускает все тесты в проекте. Тесты в Go это файлы с суффиксом `_test.go`.
```bash
go test              # запустить тесты в текущей папке
go test ./...        # запустить все тесты в проекте
```

Мы вернёмся к тестам позже, когда будем писать реальное приложение.

### `go get` — Установка зависимостей

Скачивает и устанавливает пакеты из интернета (например, с GitHub).
```bash
go get github.com/gorilla/mux    # установить пакет для маршрутизации HTTP
```

**Современный способ:** Вместо `go get` для зависимостей теперь используют модули (`go mod`). Об этом будет отдельный урок.

### `go mod` — Управление модулями (зависимостями)

Это современная система управления зависимостями в Go. Подробнее разберём в блоке про модули, но вот основы:

**Создать новый модуль:**
```bash
go mod init example.com/myproject
```

Это создаст файл `go.mod` который отслеживает зависимости проекта.

**Скачать все зависимости из go.mod:**
```bash
go mod download
```

**Очистить неиспользуемые зависимости:**
```bash
go mod tidy
```

### `go version` — Проверить версию Go
```bash
go version
# Вывод: go version go1.25.0 windows/amd64
```

Полезно когда нужно убедиться что Go установлен и узнать версию.

### `go env` — Посмотреть переменные окружения Go
```bash
go env
# Покажет все настройки: GOPATH, GOROOT, GOOS, GOARCH и т.д.
```

**Посмотреть конкретную переменную:**
```bash
go env GOPATH
# Вывод: C:\Users\YourName\go
```

## Флаги и опции

Многие команды поддерживают дополнительные флаги:

### Компиляция для другой ОС (кросс-компиляция)

Go позволяет скомпилировать программу на Windows для запуска на Linux и наоборот.

**Скомпилировать для Linux на машине с Windows:**
```bash
set GOOS=linux
set GOARCH=amd64
go build -o myapp main.go
```

**Скомпилировать для Windows на Linux/Mac:**
```bash
GOOS=windows GOARCH=amd64 go build -o myapp.exe main.go
```

Это **очень мощная фишка** — один раз написал код, скомпилировал для любой платформы.

### Уменьшение размера исполняемого файла

По умолчанию Go включает в исполняемый файл отладочную информацию. Можно убрать:
```bash
go build -ldflags="-s -w" main.go
```

Флаги `-s -w` удаляют отладочные символы, файл становится меньше (иногда на 30-50%).

## Типичный рабочий процесс

Вот как обычно работают с Go во время разработки:
```bash
# 1. Пишешь код в редакторе (VS Code, Sublime)

# 2. Запускаешь для проверки
go run main.go

# 3. Если нужно — форматируешь (VS Code делает автоматически)
go fmt main.go

# 4. Когда всё работает — компилируешь финальный файл
go build -o myapp.exe main.go

# 5. Коммитишь в Git
git add .
git commit -m "Add new feature"
git push
```

## Структура файлов Go проекта

Простой проект может выглядеть так:
```
myproject/
├── main.go           # главный файл с func main()
├── go.mod            # файл с зависимостями (создаётся через go mod init)
└── go.sum            # контрольные суммы зависимостей (создаётся автоматически)
```

Более сложный проект:
```
myproject/
├── main.go
├── go.mod
├── go.sum
├── handlers/         # папка с обработчиками HTTP
│   └── home.go
├── models/           # папка с моделями данных
│   └── user.go
└── templates/        # папка с HTML шаблонами
    └── index.html
```

Подробнее об организации кода — в блоке про модули и архитектуру.

## Полезные советы

### 1. VS Code автоматически сохраняет и форматирует

Если настроен правильно, VS Code при `Ctrl+S`:
- Сохраняет файл
- Запускает `go fmt`
- Организует импорты (удаляет неиспользуемые, добавляет недостающие)

### 2. Неиспользуемые переменные и импорты — это ошибка

В Go нельзя скомпилировать код если есть:
- Неиспользуемая переменная
- Неиспользуемый импорт

Это заставляет держать код чистым.

### 3. `go run` vs `go build`

**Разработка:** используй `go run` — быстрее, не засоряет папку исполняемыми файлами.

**Продакшн:** используй `go build` — получаешь оптимизированный файл для деплоя.

### 4. Документация всегда под рукой

Официальная документация Go отличная. Если нужна справка по пакету:
```bash
go doc fmt           # документация по пакету fmt
go doc fmt.Println   # документация по конкретной функции
```

Или онлайн: https://pkg.go.dev/

## Наш Hello World

Вот программа которую мы создали в этом уроке:

**Файл:** `block_01_tools/04_go_commands/hello/main.go`
```go
package main

import "fmt"

func main() {
	fmt.Println("Hello, World!")
}
```

**Запуск:**
```bash
go run block_01_tools/04_go_commands/hello/main.go
```

**Вывод:**
```
Hello, World!
```

Это минимальная работающая программа на Go. С неё начинается путь в разработку!

## Что дальше?

Теперь ты знаешь основные команды Go. В следующих уроках мы:
- Разберём синтаксис Go (переменные, типы, функции)
- Создадим модуль Go проекта
- Напишем HTTP сервер
- Подключим базу данных

Но фундамент заложен — ты можешь создавать и запускать Go программы!